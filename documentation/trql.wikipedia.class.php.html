<style>
.trql_documentor_DocumentorSourceFile { margin: 1em 1em; padding: 1em; border: 1px solid #000; box-sizing: border-box; }
.trql_documentor_DocumentorSourceFile * { box-sizing: border-box; }
.trql_documentor_DocumentorSourceFile hr { border-top: 4px solid #800 !important; margin:2em 0; box-shadow: 0 6px 10px 1px rgba(0,0,0,.2); }
.trql_documentor_DocumentorSourceFile pre { background: #c001; }
.trql_documentor_DocumentorSourceFile pre strong { color: #b00; }
.DocumentorLabel { font-style: italic; display: block; margin-top:1em; }
.property { font-weight: bold;}
.shadow { box-shadow: 0 20px 15px -15px rgba(0,0,0,.5); }
.constrained { max-width: 100%; height: auto; }
.center { text-align:center; }
code,samp, .filename {color: #800 !important;
   font-family: Consolas,"courier new";
   background: rgba(240, 240, 240, 0.5);
   border: 1px solid silver;
   border-radius: 3px;
   padding: 0px 5px; }
.seealso code a {text-decoration:none;
   color: #800 !important;
   font-weight: bold;
   font-style: italic;
   }
.property.inheritance code { border: none !important; }
.assert.success { border: 2px solid green; padding: 5px; border-radius:3px; }
.assert.failure { border: 2px solid red; padding: 5px; border-radius:3px; }
.assert.success code, .assert.failure code { border: none !important; }
.DocumentorLabel { font-style: italic; display: block;}
section.class { margin: 1em 1em; padding: 1em; border: 1px solid #000; background: #eee9; }
img.vaesoli-image { border:1px solid silver; padding: 1em; display: block;}
table.properties { border:1px solid silver; border-collapse: collapse; width:100%; }
table.properties thead th { border:1px solid silver;padding: .5em; width:20%; }
table.properties thead th.description { width:60%; }
table.properties tr.property td,
table.properties tr.parameter td { border:1px solid silver;padding: .5em; width:20%; }
table.properties tr.property td.description,
table.properties tr.parameter td.description { width: 60%; }
p.property.func { font: .9em/1em lucida,georgia,"times new roman",serif;
   letter-spacing: 3px;
   width: 100%;
   margin: 0 0 15px 0;
   padding: 5px;
   color: rgb(255,128,0);
   padding: 1em;
   border: 1px solid #999;
   box-shadow: 0 0 5px 5px rgb(200 200 200 / 30%);
   border: 1px solid #888; }
</style>

<div class="trql_documentor_DocumentorSourceFile">
<section class="header">
<span class="DocumentorLabel">Filename: </span><span class="property filename">trql.wikipedia.class.php</span>
<span class="DocumentorLabel">Namespace: </span><span class="property namespace"><code>trql\wikipedia</code></span>
<span class="DocumentorLabel">Class aliases: </span><span class="property aliases"><code>\trql\quitus\Mother as Mother,\trql\quitus\iContext as iContext,\trql\vaesoli\Vaesoli as Vaesoli,\trql\utility\Utility as Utility,DOMDocument; use DOMXPath; if ( ! defined( 'MOTHER_ABSTRACT_CLASS' ) ) require_once( 'trql.mother.cl as s</code></span>
<span class="DocumentorLabel">Purpose: </span><span class="property purpose">Wikipedia Search services</span>
<span class="DocumentorLabel">Author: </span><span class="property author">Pat Y. Boens</span>
<span class="DocumentorLabel">Company: </span><span class="property company">Lato Sensu Management<br />Rue du Bois des Mazuis, 47<br />5070 Vitrival<br />Belgium<br /><a href="https://www.latosensu.be" class="DocumentorLink" title="Go to https://www.latosensu.be" itemprop="url">https://www.latosensu.be</a> (geonames: <a href="http://api.geonames.org/get?geonameId=8520400&username=demo&style=full" class="DocumentorLink" title="Go to http://api.geonames.org/get?geonameId=8520400&username=demo&style=full" itemprop="url">http://api.geonames.org/get?geonameId=8520400&username=demo&style=full</a>)<br />Vae Soli!: <a href="http://www.vaesoli.com" class="DocumentorLink" title="Go to http://www.vaesoli.com" itemprop="url">http://www.vaesoli.com</a><br /></span>
<span class="DocumentorLabel">Creation date: </span><span class="property cdate">29-07-20 11:44</span>
<span class="DocumentorLabel">Last modification date: </span><span class="property mdate">30/03/2021 - 09:38:22</span>
<span class="DocumentorLabel">License/Copyrights: </span><span class="property license">Intellectual Property belongs to Pat Y. Boens. You are free to:<br /><br /><strong>Share</strong> — copy and redistribute the material in any medium or format<br /><strong>Adapt</strong> — remix, transform, and build upon the material for any purpose, even commercially.<br /><br />Under the following terms:<br /><br /><strong>Attribution</strong> — You must give appropriate credit, provide a link to the license, and indicate if changes were made. You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.<br /><br /><strong>No additional restrictions</strong> — You may not apply legal terms or technological measures that legally restrict others from doing anything the license permits.<br /><br /><a href="https://creativecommons.org/licenses/by/4.0/legalcode" class="DocumentorLink" title="Go to https://creativecommons.org/licenses/by/4.0/legalcode" itemprop="url">https://creativecommons.org/licenses/by/4.0/legalcode</a></span>
</section> <!-- .header -->
<section class="classes">
<section class="class shadow">
<span class="DocumentorLabel">Class: </span><span class="property classname"><code>Wikipedia</code></span>
<span class="DocumentorLabel">Description: </span><span class="property description">Access to wikipedia</span>
<span class="DocumentorLabel">Inheritance: </span><span class="property inheritance"><code><a href="?src=Mother">Mother</a> &gt; <a href="?src=Utility">Utility</a> &gt; Wikipedia</code></span>
<span class="DocumentorLabel">Declaration: </span><span class="property declaration"><code>class Wikipedia extends Utility implements iContext</code></span>
<span class="DocumentorLabel">Doc: </span><span class="property doc"><a href="https://www.mediawiki.org/wiki/API:Opensearch" class="DocumentorLink" title="Go to https://www.mediawiki.org/wiki/API:Opensearch" itemprop="url">https://www.mediawiki.org/wiki/API:Opensearch</a>
 <a href="https://en.wikipedia.org/w/api.php" class="DocumentorLink" title="Go to https://en.wikipedia.org/w/api.php" itemprop="url">https://en.wikipedia.org/w/api.php</a>?utm_source=TRQLLabs</span>
<span class="DocumentorLabel">Properties: </span>
<table class="properties">
<thead>
<tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="description">Description</th>
</tr>
</thead>
<tr class="property">
<td class="name" id="var.self"><code>$self</code></td>
<td class="type"><code>array</code></td>
<td class="description">Fixed 'class' information.</td>
</tr>
<tr class="property">
<td class="name" id="var.ttl"><code>$ttl</code></td>
<td class="type"><code>int</code></td>
<td class="description">Time-to-Live in sec; 1 full day by default</td>
</tr>
<tr class="property">
<td class="name" id="var.wikidataId"><code>$wikidataId</code></td>
<td class="type"><code>string</code></td>
<td class="description">Wikidata ID. No equivalent.</td>
</tr>
</table>
<h2 class="DocumentorLabel">Methods of <code>Wikipedia</code></h2>
<p class="property func" id="fnc.__construct"><span class="name"><strong><code>__construct()</code></strong></span>: Class constructor</p>
<p class="property">Syntax:</p>
<p><code>__construct( $szHome )</code></p>
<span class="DocumentorLabel">Parameters: </span>
<table class="properties">
<thead>
<tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="description">Description</th>
</tr>
</thead>
<tr class="parameter">
<td class="name" id="param.__construct.szHome"><code>$szHome</code></td>
<td class="type"><code>string</code></td>
<td class="description seealso">Home of the class. Optional.</td>
</tr>
</table>
<p class="property return">Return:</p>
<p class="seealso">(self):  The current instance of the class</p>
<hr /><p class="property func" id="fnc.__destruct"><span class="name"><strong><code>__destruct()</code></strong></span>: Class destructor</p>
<p class="property">Syntax:</p>
<p><code>__destruct()</code></p>
<p class="property return">Return:</p>
<p class="seealso">(void):  No return</p>
<hr /><p class="property func" id="fnc.__parse1"><span class="name"><strong><code>__parse1()</code></strong></span>: Parses the first set of results from Wikipedia (a list of URLs that correspond
 to the term that is looked for</p>
<p class="property">Abstract:</p>
<p>Retrieving information from Wikipedia is performed in 2 steps :

 1) Get potential results (list of potential URLs - max 500)
 2) Get access to the real content (<code>parse2()</code>)</p>
<p class="property">Syntax:</p>
<p><code>__parse1( $szXML )</code></p>
<span class="DocumentorLabel">Parameters: </span>
<table class="properties">
<thead>
<tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="description">Description</th>
</tr>
</thead>
<tr class="parameter">
<td class="name" id="param.__parse1.szXML"><code>$szXML</code></td>
<td class="type"><code>string</code></td>
<td class="description seealso">The XML to parse</td>
</tr>
</table>
<p class="property return">Return:</p>
<p class="seealso">(array):  An array of results</p>
<hr /><p class="property func" id="fnc.__parse2"><span class="name"><strong><code>__parse2()</code></strong></span>: Parses the second set of results from Wikipedia (the real content of a page)</p>
<p class="property">Abstract:</p>
<p>Retrieving information from Wikipedia is performed in 2 steps :

 1) Get potential results (list of potential URLs - max 500) (<code>parse1()</code>)
 2) Get access to the real content (<code>parse2()</code>)</p>
<p class="property">Syntax:</p>
<p><code>__parse2( $szXML )</code></p>
<span class="DocumentorLabel">Parameters: </span>
<table class="properties">
<thead>
<tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="description">Description</th>
</tr>
</thead>
<tr class="parameter">
<td class="name" id="param.__parse2.szXML"><code>$szXML</code></td>
<td class="type"><code>string</code></td>
<td class="description seealso">The XML to parse</td>
</tr>
</table>
<p class="property return">Return:</p>
<p class="seealso">(array):  An array of results</p>
<hr /><p class="property func" id="fnc.__parse3"><span class="name"><strong><code>__parse3()</code></strong></span>: Parses the resulting XML of a call to searchEntities()</p>
<p class="property">Syntax:</p>
<p><code>__parse3( $szXML )</code></p>
<span class="DocumentorLabel">Parameters: </span>
<table class="properties">
<thead>
<tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="description">Description</th>
</tr>
</thead>
<tr class="parameter">
<td class="name" id="param.__parse3.szTerm"><code>$szTerm</code></td>
<td class="type"><code>string</code></td>
<td class="description seealso">The term that we looked for</td>
</tr>
<tr class="parameter">
<td class="name" id="param.__parse3.szXML"><code>$szXML</code></td>
<td class="type"><code>string</code></td>
<td class="description seealso">The XML to parse</td>
</tr>
</table>
<p class="property return">Return:</p>
<p class="seealso">(array):  An array of results</p>
<hr /><p class="property func" id="fnc.__parse4"><span class="name"><strong><code>__parse4()</code></strong></span>: Parses the return of an entity (get entity based on its ID) from WikiData</p>
<p class="property">Syntax:</p>
<p><code>__parse4( $szXML )</code></p>
<span class="DocumentorLabel">Parameters: </span>
<table class="properties">
<thead>
<tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="description">Description</th>
</tr>
</thead>
<tr class="parameter">
<td class="name" id="param.__parse4.szTerm"><code>$szTerm</code></td>
<td class="type"><code>string</code></td>
<td class="description seealso">The term that we looked for</td>
</tr>
<tr class="parameter">
<td class="name" id="param.__parse4.szXML"><code>$szXML</code></td>
<td class="type"><code>string</code></td>
<td class="description seealso">The XML to parse</td>
</tr>
</table>
<p class="property return">Return:</p>
<p class="seealso">(array):  An array of results</p>
<hr /><p class="property func" id="fnc.call"><span class="name"><strong><code>call()</code></strong></span>: Calls Wikipedia via its dedicated URL</p>
<p class="property">Syntax:</p>
<p><code>call( $aParams )</code></p>
<span class="DocumentorLabel">Parameters: </span>
<table class="properties">
<thead>
<tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="description">Description</th>
</tr>
</thead>
<tr class="parameter">
<td class="name" id="param.call.aParams"><code>$aParams</code></td>
<td class="type"><code>array</code></td>
<td class="description seealso">Associative array to pass parameters in the URL that must be called ("opensearch" is the main verb)</td>
</tr>
</table>
<p class="property return">Return:</p>
<p class="seealso">(string):  Result returned by the call to <code>getURL(...)</code></p>
<hr /><p class="property func" id="fnc.destruct"><span class="name"><strong><code>destruct()</code></strong></span>: Class destructor</p>
<p class="property">Syntax:</p>
<p><code>destruct()</code></p>
<p class="property return">Return:</p>
<p class="seealso">(void):  No return.</p>
<hr /><p class="property func" id="fnc.getEntity"><span class="name"><strong><code>getEntity()</code></strong></span>: Parses the return of an entity (get entity based on its ID) from WikiData</p>
<p class="property">Abstract:</p>
<p>Entities are like "concepts". Stevie Nicks is known as an entity on Wikidata:
 <a href="https://www.wikidata.org/wiki/Q234691" class="DocumentorLink" title="Go to https://www.wikidata.org/wiki/Q234691" itemprop="url">https://www.wikidata.org/wiki/Q234691</a>. Getting all info pertaining
 to entity <code>Q234691</code> corresponds to <code>$oWiki->getEntity( 'Q234691' )</code> or
 <a href="https://www.wikidata.org/w/api.php?action=wbgetentities&ids=Q234691&format=xml" class="DocumentorLink" title="Go to https://www.wikidata.org/w/api.php?action=wbgetentities&ids=Q234691&format=xml" itemprop="url">https://www.wikidata.org/w/api.php?action=wbgetentities&ids=Q234691&format=xml</a><br />

 For Fleetwood Mac (Q106648):[br[
 [url]https://www.wikidata.org/w/api.php?action=wbgetentities&ids=Q106648&format=xml[/ulr]</p>
<p class="property">Syntax:</p>
<p><code>getEntity( $szID )</code></p>
<span class="DocumentorLabel">Parameters: </span>
<table class="properties">
<thead>
<tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="description">Description</th>
</tr>
</thead>
<tr class="parameter">
<td class="name" id="param.getEntity.szID"><code>$szID</code></td>
<td class="type"><code>string</code></td>
<td class="description seealso">Entity ID (e.g. "<code>Q234691</code>")</td>
</tr>
</table>
<p class="property return">Return:</p>
<p class="seealso">(array):  An array of results</p>
<hr /><p class="property func" id="fnc.search"><span class="name"><strong><code>search()</code></strong></span>: Performs an open search on <code>$szTerm</code></p>
<p class="property">Warning:</p>
<p>Will onky work on the basis of English terms</p>
<p class="property">Syntax:</p>
<p><code>search( $iLimit )</code></p>
<span class="DocumentorLabel">Parameters: </span>
<table class="properties">
<thead>
<tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="description">Description</th>
</tr>
</thead>
<tr class="parameter">
<td class="name" id="param.search.szTerm"><code>$szTerm</code></td>
<td class="type"><code>string</code></td>
<td class="description seealso">The terms to look for</td>
</tr>
<tr class="parameter">
<td class="name" id="param.search.iLimit"><code>$iLimit</code></td>
<td class="type"><code>int</code></td>
<td class="description seealso">Number of results. Optional. <code>All</code> by default.</td>
</tr>
</table>
<p class="property return">Return:</p>
<p class="seealso">(array):  An array of results</p>
<hr /><p class="property func" id="fnc.searchEntities"><span class="name"><strong><code>searchEntities()</code></strong></span>: Returns the entities corresponding to <code>$szTerm</code></p>
<p class="property">Abstract:</p>
<p>Entities are like "concepts". Stevie Nicks is known as an entity on Wikidata:
 <a href="https://www.wikidata.org/wiki/Q234691" class="DocumentorLink" title="Go to https://www.wikidata.org/wiki/Q234691" itemprop="url">https://www.wikidata.org/wiki/Q234691</a>. Getting all info pertaining
 to entity <code>Q234691</code> corresponds to <code>$oWiki->getEntity( 'Q234691' )</code> or
 <a href="https://www.wikidata.org/w/api.php?action=wbgetentities&ids=Q234691&format=xml" class="DocumentorLink" title="Go to https://www.wikidata.org/w/api.php?action=wbgetentities&ids=Q234691&format=xml" itemprop="url">https://www.wikidata.org/w/api.php?action=wbgetentities&ids=Q234691&format=xml</a><br />

 For Fleetwood Mac (Q106648):[br[
 [url]https://www.wikidata.org/w/api.php?action=wbgetentities&ids=Q106648&format=xml[/ulr]<br />

 Before we know which entity ID we must use in <code>getEntity()</code> we must get
 the entity ID : example ... what is the entity ID of "<code>Fleetwood Mac</code>"?
 This is what <code>searchEntities(à</code> is for! : <br />
 <code>$oWiki->searchEntities("Fleetwood Mac")</code><br />

 There may be several entities to return. For example,
 <code>$aRetVal = $oWiki->searchEntities( 'Proximus',50 );</code> returns 39 results.
 Which is the one that makes most sense? It's up to you to decide. For example,
 when we update the birthdate, date of death, etc. in the Wikipedia structure
 of an Artist file, we loo, for all the entities pertaining to an artist:
 <code>$aRetVal = $oWiki->searchEntities( $szArtist,50 );</code> after which, we check
 whether each result seems to be pertaining to an artist; we use a function of
 our own that scans all the results:
 <code>if ( ! is_null( $aResult = isSinger( $aRetVal ) ) )</code> that contains all the
 intelligence of an artist detection.</p>
<p class="property">Syntax:</p>
<p><code>searchEntities( $iResults )</code></p>
<span class="DocumentorLabel">Parameters: </span>
<table class="properties">
<thead>
<tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="description">Description</th>
</tr>
</thead>
<tr class="parameter">
<td class="name" id="param.searchEntities.szTerm"><code>$szTerm</code></td>
<td class="type"><code>string</code></td>
<td class="description seealso">The terms to look for</td>
</tr>
<tr class="parameter">
<td class="name" id="param.searchEntities.iResults"><code>$iResults</code></td>
<td class="type"><code>int</code></td>
<td class="description seealso">Number of entities to return. Optional. <code>1</code> by default. <strong>No longer used!</strong></td>
</tr>
</table>
<p class="property return">Return:</p>
<p class="seealso">(array):  An array of results</p>
<hr /></section> <!-- .class -->
</section> <!-- .classes -->
</div> <!-- End of trql_documentor_DocumentorSourceFile-->
